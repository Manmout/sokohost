{
  "version": "3",
  "services": {
    "backend": {
      "image": "node:18-alpine",
      "build": {
        "context": "./backend"
      },
      "ports": ["5000:5000"],
      "environment": {
        "PORT": "5000",
        "NODE_ENV": "production",
        "SUPABASE_URL": "${SUPABASE_URL}",
        "SUPABASE_KEY": "${SUPABASE_KEY}",
        "JWT_SECRET": "${JWT_SECRET}",
        "STRIPE_SECRET_KEY": "${STRIPE_SECRET_KEY}",
        "FRONTEND_URL": "http://localhost:3000"
      }
    },
    "frontend": {
      "image": "node:18-alpine",
      "build": {
        "context": "./frontend"
      },
      "ports": ["3000:3000"],
      "environment": {
        "NEXT_PUBLIC_API_URL": "http://localhost:5000/api",
        "NEXT_PUBLIC_STRIPE_KEY": "${NEXT_PUBLIC_STRIPE_KEY}"
      }
    }
  }
}
